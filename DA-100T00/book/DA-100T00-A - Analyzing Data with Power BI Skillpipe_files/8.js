(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{414:function(t,e,n){"use strict";n.r(e),n.d(e,"DialogRenderer",(function(){return u})),n.d(e,"UxDialogRenderer",(function(){return u})),n.d(e,"hasTransition",(function(){return g})),n.d(e,"transitionEvent",(function(){return d}));var i,o,r,a,s,l=n(6),c=n(27),d=function(){if(i)return i;var t=l.b.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in e)if(void 0!==t.style[n])return i=e[n];return""},g=(a=["webkitTransitionDuration","oTransitionDuration"],function(t){return o||(o=l.b.createElement("fakeelement"),r="transitionDuration"in o.style?"transitionDuration":a.find((function(t){return t in o.style}))),!!r&&!!l.b.getComputedStyle(t)[r].split(",").find((function(t){return!!parseFloat(t)}))});var u=function(){function t(){}return t.keyboardEventHandler=function(e){var n=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(e);if(n){var i=t.dialogControllers[t.dialogControllers.length-1];if(i&&i.settings.keyboard){var o=i.settings.keyboard;"Escape"===n&&(!0===o||o===n||Array.isArray(o)&&o.indexOf(n)>-1)?i.cancel():"Enter"===n&&(o===n||Array.isArray(o)&&o.indexOf(n)>-1)&&i.ok()}}},t.trackController=function(e){var n=t.dialogControllers;n.length||l.b.addEventListener(e.settings.keyEvent||"keyup",t.keyboardEventHandler,!1),n.push(e)},t.untrackController=function(e){var n=t.dialogControllers,i=n.indexOf(e);-1!==i&&n.splice(i,1),n.length||l.b.removeEventListener(e.settings.keyEvent||"keyup",t.keyboardEventHandler,!1)},t.prototype.getOwnElements=function(t,e){for(var n=t.querySelectorAll(e),i=[],o=0;o<n.length;o++)n[o].parentElement===t&&i.push(n[o]);return i},t.prototype.attach=function(t){t.settings.restoreFocus&&(this.lastActiveElement=l.b.activeElement);var e=l.b.createElement("div");e.appendChild(this.anchor);var n=this.dialogContainer=l.b.createElement("ux-dialog-container");n.appendChild(e);var i=this.dialogOverlay=l.b.createElement("ux-dialog-overlay"),o="number"==typeof t.settings.startingZIndex?t.settings.startingZIndex+"":"auto";i.style.zIndex=o,n.style.zIndex=o;var r=this.host,a=this.getOwnElements(r,"ux-dialog-container").pop();a&&a.parentElement?(r.insertBefore(n,a.nextSibling),r.insertBefore(i,a.nextSibling)):(r.insertBefore(n,r.firstChild),r.insertBefore(i,r.firstChild)),t.controller.attached(),r.classList.add("ux-dialog-open")},t.prototype.detach=function(e){var n=this.host;n.removeChild(this.dialogOverlay),n.removeChild(this.dialogContainer),e.controller.detached(),t.dialogControllers.length||n.classList.remove("ux-dialog-open"),e.settings.restoreFocus&&e.settings.restoreFocus(this.lastActiveElement)},t.prototype.setAsActive=function(){this.dialogOverlay.classList.add("active"),this.dialogContainer.classList.add("active")},t.prototype.setAsInactive=function(){this.dialogOverlay.classList.remove("active"),this.dialogContainer.classList.remove("active")},t.prototype.setupEventHandling=function(t){this.stopPropagation=function(t){t._aureliaDialogHostClicked=!0},this.closeDialogClick=function(e){t.settings.overlayDismiss&&!e._aureliaDialogHostClicked&&t.cancel()};var e=t.settings.mouseEvent||"click";this.dialogContainer.addEventListener(e,this.closeDialogClick),this.anchor.addEventListener(e,this.stopPropagation)},t.prototype.clearEventHandling=function(t){var e=t.settings.mouseEvent||"click";this.dialogContainer.removeEventListener(e,this.closeDialogClick),this.anchor.removeEventListener(e,this.stopPropagation)},t.prototype.centerDialog=function(){var t=this.dialogContainer.children[0],e=Math.max(l.b.querySelectorAll("html")[0].clientHeight,window.innerHeight||0);t.style.marginTop=Math.max((e-t.offsetHeight)/2,30)+"px",t.style.marginBottom=Math.max((e-t.offsetHeight)/2,30)+"px"},t.prototype.awaitTransition=function(t,e){var n=this;return new Promise((function(i){var o=n,r=d();e||!g(n.dialogContainer)?i():n.dialogContainer.addEventListener(r,(function t(e){e.target===o.dialogContainer&&(o.dialogContainer.removeEventListener(r,t),i())})),t()}))},t.prototype.getDialogContainer=function(){return this.anchor||(this.anchor=l.b.createElement("div"))},t.prototype.showDialog=function(e){var n=this;s||(s=l.b.querySelector("body")),e.settings.host?this.host=e.settings.host:this.host=s;var i=e.settings;return this.attach(e),"function"==typeof i.position?i.position(this.dialogContainer,this.dialogOverlay):i.centerHorizontalOnly||this.centerDialog(),t.trackController(e),this.setupEventHandling(e),this.awaitTransition((function(){return n.setAsActive()}),e.settings.ignoreTransitions)},t.prototype.hideDialog=function(e){var n=this;return this.clearEventHandling(e),t.untrackController(e),this.awaitTransition((function(){return n.setAsInactive()}),e.settings.ignoreTransitions).then((function(){n.detach(e)}))},t.dialogControllers=[],t}();Object(c.C)()(u)}}]);